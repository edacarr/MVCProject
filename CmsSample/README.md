# MVCProject

**Author**: edacarr

MVCProject is an ASP.NET Core 9 MVC content-management example. It uses:

- **Oracle** (Managed Data Access) for Pages, BlogPosts, SliderItems and ContactMessages  
- **SQLite** (via EF Core) for ASP.NET Core Identity tables  
- **Bootstrap 5** for styling and layout  

---

## Features

- **Static Pages** (About, Contact, etc.)  
- **Blog Posts** (CRUD, file-upload cover images)  
- **Homepage Slider** (manage images & links)  
- **Contact Form** with server-side validation  
- **Authentication & Authorization** (Identity UI)  
- Only authors can edit/delete their own blog posts  

---

## Prerequisites

1. [.NET 9 SDK](https://dotnet.microsoft.com/download/dotnet/9.0)  
2. Oracle database instance (e.g. XE/PDB) with a user/schema for your CMS  
3. (Optional) [SQLite](https://www.sqlite.org) for the Identity store  

---

## Getting Started

1. **Clone the repo**
   ```bash
   git clone https://github.com/edacarr/MVCProject.git
   cd MVCProject

**Configure Connections**  
   Update `appsettings.json` with your Oracle connection string and SQLite path (if using Identity):
   ```json
   {
     "ConnectionStrings": {
       "OracleDb": "User Id=MYSCHEMA;Password=MyPass;Data Source=localhost:1521/XEPDB1;",
       "IdentityDb": "Data Source=identity.db"
     },
     "Logging": {
       "LogLevel": { "Default": "Information" }
     },
     "AllowedHosts": "*"
   }
   ```

Create Oracle Tables

CREATE TABLE PAGES (
  ID           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  SLUG         VARCHAR2(100) NOT NULL,
  TITLE        VARCHAR2(200) NOT NULL,
  HTMLBODY     CLOB,
  LASTUPDATED  TIMESTAMP DEFAULT SYSTIMESTAMP
);

CREATE TABLE BLOG_POSTS (
  ID            NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  SLUG          VARCHAR2(100) NOT NULL,
  TITLE         VARCHAR2(200) NOT NULL,
  EXCERPT       VARCHAR2(4000),
  HTMLBODY      CLOB,
  COVERIMAGEURL VARCHAR2(500),
  PUBLISHEDON   TIMESTAMP DEFAULT SYSTIMESTAMP,
  AUTHOR_ID     VARCHAR2(450) NOT NULL
);

CREATE TABLE SLIDER_ITEMS (
  ID           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  CAPTION      VARCHAR2(200) NOT NULL,
  IMAGEURL     VARCHAR2(500),
  TARGETURL    VARCHAR2(500),
  DISPLAYORDER NUMBER
);

CREATE TABLE CONTACT_MESSAGES (
  ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NAME      VARCHAR2(100) NOT NULL,
  EMAIL     VARCHAR2(150) NOT NULL,
  SUBJECT   VARCHAR2(200) NOT NULL,
  MESSAGE   CLOB NOT NULL,
  SENTON    TIMESTAMP DEFAULT SYSTIMESTAMP
);


Setup Identity (SQLite)

dotnet restore
dotnet build

# add & apply migrations for the IdentityDbContext (AppDbContext)
dotnet ef migrations add IdentityInit --context AppDbContext
dotnet ef database update     --context AppDbContext


Run the App

dotnet watch run


Project Structure

/MVCProject
│
├─ Controllers
│    ├ PagesController.cs
│    ├ BlogPostsController.cs
│    ├ SliderItemsController.cs
│    └ HomeController.cs
│
├─ Data
│    ├ AppDbContext.cs         ← EF Core Identity context
│    ├ OraclePageRepository.cs
│    ├ OracleBlogRepository.cs
│    ├ OracleSliderRepository.cs
│    └ OracleContactRepository.cs
│
├─ Models
│    ├ StaticPage.cs
│    ├ BlogPost.cs
│    ├ SliderItem.cs
│    ├ ContactMessage.cs
│    └ Comment.cs
│
├─ Views
│    ├ Home
│    ├ Pages
│    ├ BlogPosts
│    ├ SliderItems
│    ├ Shared
│    └ _LoginPartial.cshtml
│
└─ wwwroot
     ├ css
     ├ js
     └ uploads

Usage
This project is designed to be a simple content management system (CMS) with the following user roles:
- **Anonymous Users**: Can view static pages, blog lists, blog details, and the homepage slider.
- **Registered Users**: Can create, edit, and delete only their own blog posts.
- **Admin Users**: Have full access to all features, including managing pages, blog posts, slider items, and contact messages.


Contributing
If you'd like to contribute, please follow these steps:  
-Fork the repository
-Create a feature branch (e.g. `git checkout -b feature/xyz`)
-Commit your changes (e.g. `git commit -m "Add xyz"`)
-Push to your branch (e.g. `git push origin feature/xyz`)
-Open a Pull Request




